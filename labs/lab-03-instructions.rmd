---
title: 'Lab 03 - Graphics'
output:
  html_document:
    theme: readable
    df_print: paged
    highlight: tango
    include:
      after_body: footer.html
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=F, warning=F)
library( dplyr )
library( pander )
```

#### [CPP 526: Foundations of Data Science I](https://ds4ps.org/cpp-526-spr-2020/)

<br>

*This lab introduces core plotting functions in order to create customized graphics in R.*



You can create a new R Markdown file, or download the **LAB-03 RMD template**: 

<center>

[![](images/download.png)](https://www.dropbox.com/s/uz4m8bptbtip8x3/lab-03-template.rmd?dl=1)

</center>

--- 

<br>
<br>

## Replicating NYT Graphics

For this lab you will replicate the following [NYT Graphic](https://archive.nytimes.com/www.nytimes.com/interactive/2013/03/29/sports/baseball/Strikeouts-Are-Still-Soaring.html?_r=0&ref=baseball) *as closely as possible*. 

<br>

![](images/strikeouts.png)


<br>
<br>

## Functions 

You will likely use the following functions. Either `plot()` or `plot.new()` and
`plot.window()`, as well as:

```{r, eval=F}
points()
gray()
axis()
title()
text()
mtext()
segments()
abline()
```




<br><br>

# Data

The data comes from the `Lahman` baseball data package. The **Teams** dataset contains season statistics for each baseball team from the late 1800s onward. The graph reports average strike-outs per game, which is calculated as **ave.so** below:

<br>

```{r load_data}

library(Lahman)
data(Teams)

ave.so <- Teams$SO / Teams$G

```


```{r, echo=F}
head( Teams )
```

<br>
<br>

# Preprocessing

You will need only the average strike-outs per game, and the year variables:

```{r}

ave.so <- Teams$SO / Teams$G        # Average strike-outs per game each season 
year <- Teams$yearID

```

<br>

It is advisable to keep all of the variables together inside of a data frame. Currently, `ave.so` is an active vector, but it is not in the same data frame as the other variables. 

<br>
<br>

## Creating New Variables

To create a new variable inside of an existing data frame try:

```{r eval=FALSE}

data.frame.name$new.variable.name

```

<br>

For example:

```{r}

Teams$ave.so <- Teams$SO / Teams$G

```

<br>

Make a mental note of the difference, as some functions (especially the data wrangling functions in the **dplyr** package) will require that all variables are contained within a single data frame. 

<br>

```{r, echo=T}

summary(ave.so) %>% 
  pander()                          # pander() cleanly prints data

```

<br>

**Note:** *You don't have to understand baseball to recreate the graphic.*

<br>
<br>

# Lab Instructions

Your task is to **replicate as closely as possible** the graphic 
published by the NYT.

The initial code provided below will help get you started.

<br>
<br>

#### 1.	Plot Average Strike-Outs by Year 

Since the `Lahman` data is current but the NYT Graphic is from 1900 to 2012, 
use `xlim = c()` to truncate the years.

<br>

```{r fig.align='center'}

ave.so.min <- min( ave.so, na.rm=T )
ave.so.max <- max( ave.so, na.rm=T )

plot.new()

plot.window(xlim = c(1900, 2012), 
            ylim = c(ave.so.min, 
                     ave.so.max))   # Specify dimensions

points(x = year, 
       y = ave.so)                  # Plot points

```

<br>
<br>

#### 2. Modify the Aesthetics of Plotted Points

In order to replicate the aesthetics of the NYT graphic, we can modify `points()`.

<br>

```{r fig.align='center'}

plot.new()

plot.window(xlim = c(1900, 2012), 
            ylim = c(ave.so.min, 
                     ave.so.max))   # Specify dimensions

points(x = year, 
       y = ave.so,
       col = "gray85",              # Color
       pch = 16,                    # Shape
       cex = 0.75)                  # Size

```


<br>
<br>

#### 3. Replicate the Axes 

You'll need to modify your axes a bit further, but this should get you started.

<br>

```{r fig.align='center'}

plot.new()

plot.window(xlim = c(1900, 2012), 
            ylim = c(ave.so.min, 
                     ave.so.max))   # Specify dimensions

points(x = year, 
       y = ave.so,
       col = "gray85",              # Color
       pch = 16,                    # Shape
       cex = 0.75)                  # Size

axis(side = 1,                      # Add x-axis
     lwd = 2,                       # Line width
     hadj = -0.1,                   # Horizontal label position 
     padj = -1,                     # Vertical label position
     at = seq(from = 1900, 
              to = 2010, 
              by = 10))             # Specify tick label sequence

axis(side = 4,                      # Add y-axis
     lwd = 0,                       # Remove axis line
     las = 1,                       # Rotate labels
     col.axis = "gray85",           # Adjust label colors
     at = seq(from = 0,             # Specify axis values
              to = 9, 
              by = 1), 
     font.axis = 2)                 # Set labels to bold

```

#### 4. Continue to Replicate the Graphic

Use the above recommended functions and modifications to **create as close a replication as possible**. 

<br>
<br>

## Hints

You can often rely on internal documentation as well as the web.

<br>

### Internal Documentation

If you need help looking up arguments remember these two helpful functions:

* `help()`
* `args()`

<br>

For example:

```{r, eval=F}

args(abline)
help(mtext)

```

<br>

### External Message Boards

This lab assignment will push you to explore the nuances of these 
functions and their arguments.  Don't hesitate to use the web to overcome 
challenging function modifications.

1. Include the language, i.e. "r"
2. Include the function name, e.g. `text()`
3. Concisely describe your intent, e.g. "allow text overflow" 

<br>
<br>

# Submission Instructions

**Canvas:** If using *Canvas*, upload your .HTML file and .RMD file to the 
appropriate lab submission link. 

**iCollege:** If using *iCollege*, zip your .HTML and .RMD files and submit the 
zipped file to the appropriate lab submission link.

<br>

Remember to:

* Name your files according to the convention: **Lab-##-LastName.Rmd**
* Show your solution, including your code
* Do not print excessive output (like a full data set)
* Follow appropriate style guidelines (spaces between arguments, etc.)

<br>
<br>
<br>

--------

<br>
